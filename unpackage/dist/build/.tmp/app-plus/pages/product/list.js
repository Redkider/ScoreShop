(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/list"],{"105e":function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("a34a")),o=n("00ba");function i(t){return t&&t.__esModule?t:{default:t}}function s(t){return l(t)||u(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){h(t,e,n[e])})}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,a)}function p(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){f(o,r,a,i,s,"next",t)}function s(t){f(o,r,a,i,s,"throw",t)}i(void 0)})}}var g=function(){return n.e("components/rf-load-more/rf-load-more").then(n.bind(null,"be3b"))},m=function(){return Promise.all([n.e("common/vendor"),n.e("components/rf-recommend/rf-recommend")]).then(n.bind(null,"2584"))},v=function(){return n.e("components/empty").then(n.bind(null,"b40f"))},b=function(){return n.e("components/uni-icons/uni-icons").then(n.bind(null,"1183"))},P=function(){return n.e("components/rf-search-bar/rf-search-bar").then(n.bind(null,"072d"))},y={components:{rfLoadMore:g,rfSearchBar:P,empty:v,uniIcons:b,rfRecommend:m},data:function(){return{loading:!0,headerShow:!0,navBarTop:"0px",cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,cateId:0,priceOrder:0,salesOrder:0,cateList:[],goodsList:[],keyword:null,cateParams:null,page:1,filterParams:{},isShowNavBar:!0,hotSearchDefault:"请输入关键字",contentTop:"88upx",errorInfo:void 0}},onLoad:function(t){this.initData(t)},onShow:function(){navigator&&(this.headerTop=document.getElementsByTagName("uni-page-head")[0]&&document.getElementsByTagName("uni-page-head")[0].offsetHeight+"px")},onPageScroll:function(t){t.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){this.filterParams={},this.page=1,this.goodsList=[],this.getProductList("refresh")},onReachBottom:function(){this.page++,this.getProductList()},methods:{initData:function(e){switch(navigator&&(this.headerTop=document.getElementsByTagName("uni-page-head")[0]&&document.getElementsByTagName("uni-page-head")[0].offsetHeight+"px"),t.getSystemInfoSync().platform){case"android":this.navBarTop="118upx";break;case"ios":this.navBarTop="188upx";break}if(this.cateId=e.cate_id,e.params&&(this.cateParams=JSON.parse(e.params),1===this.cateParams.guessYouLike))return this.isShowNavBar=!1,this.contentTop="18upx",void this.getGuessYouLikeList();this.keyword=e.keyword,this.hotSearchDefault=e.keyword,this.keyword||(this.hotSearchDefault=t.getStorageSync("hotSearchDefault")),this.getProductList()},handleSearchProductList:function(t){this.keyword=t.searchValue,this.page=1,this.goodsList=[],this.filterParams={},this.getProductList()},navToIndex:function(){t.reLaunch({url:"/pages/index/index"})},getProductList:function(){var e=p(a.default.mark(function e(n){var r,i=this;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={},this.keyword?r.keyword=this.keyword:this.cateId?r.cate_id=this.cateId:this.cateParams&&(r=d({},this.cateParams)),r.page=this.page,e.next=5,this.$get("".concat(o.productList),d({},r,this.filterParams)).then(function(e){i.loading=!1,i.getProductCate(),"refresh"===n&&t.stopPullDownRefresh(),i.loadingType=10===e.data.length?"more":"nomore",i.goodsList=[].concat(s(i.goodsList),s(e.data))}).catch(function(e){i.errorInfo=e,i.goodsList=[],i.loading=!1,"refresh"===n&&t.stopPullDownRefresh()});case 5:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getGuessYouLikeList:function(){var t=p(a.default.mark(function t(){var e=this;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$get("".concat(o.guessYouLikeList),{}).then(function(t){e.loadingType=10===t.data.length?"more":"nomore",e.goodsList=[].concat(s(e.goodsList),s(t.data))}).catch(function(t){r("log",t," at pages\\product\\list.vue:249")});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getProductCate:function(){var t=p(a.default.mark(function t(){var e=this;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$get("".concat(o.productCate)).then(function(t){e.cateList=t.data,e.cateList.unshift({title:"全部商品",id:""})});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),tabClick:function(e){this.filterParams={},this.filterIndex===e&&4!==e&&1!==e||(this.filterIndex=e,0===e?this.filterParams={}:1===e?1===this.salesOrder?(this.filterParams.sales="desc",this.salesOrder=2):(this.filterParams.sales="asc",this.salesOrder=1):2===e?this.filterParams.view="desc":3===e?this.filterParams.collect="desc":4===e&&(1===this.priceOrder?(this.filterParams.price="desc",this.priceOrder=2):(this.filterParams.price="asc",this.priceOrder=1)),t.pageScrollTo({duration:300,scrollTop:0}),this.page=1,this.goodsList.length=0,this.loading=!0,this.getProductList())},toggleCateMask:function(t){var e=this,n="show"===t?10:300,r="show"===t?1:0;this.cateMaskState=2,setTimeout(function(){e.cateMaskState=r},n)},changeCate:function(e){e||(this.cateParams=null,this.cateId=null,this.keyword=null),this.cateId=e,this.keyword=void 0,this.toggleCateMask(),t.pageScrollTo({duration:300,scrollTop:0}),this.page=1,this.goodsList.length=0,this.filterParams={},this.loading=!0,this.getProductList("refresh")},navTo:function(e){t.navigateTo({url:e})},stopPrevent:function(){}}};e.default=y}).call(this,n("6e42")["default"],n("0de9")["default"])},"6a46":function(t,e,n){"use strict";n.r(e);var r=n("9b2a"),a=n("d930");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("85c2");var i,s=n("f0c5"),c=Object(s["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);e["default"]=c.exports},"85c2":function(t,e,n){"use strict";var r=n("9e22"),a=n.n(r);a.a},8821:function(t,e,n){"use strict";(function(t){n("8cfb"),n("921b");r(n("66fd"));var e=r(n("6a46"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"9b2a":function(t,e,n){"use strict";var r={"rf-search-bar":()=>n.e("components/rf-search-bar/rf-search-bar").then(n.bind(null,"072d")),"rf-load-more":()=>n.e("components/rf-load-more/rf-load-more").then(n.bind(null,"be3b")),"rf-loading":()=>n.e("components/rf-loading/rf-loading").then(n.bind(null,"6109"))},a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return r})},"9e22":function(t,e,n){},d930:function(t,e,n){"use strict";n.r(e);var r=n("105e"),a=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);e["default"]=a.a}},[["8821","common/runtime","common/vendor"]]]);