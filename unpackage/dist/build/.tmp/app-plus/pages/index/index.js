(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"2d20":function(e,t,n){"use strict";var a={"rf-search-bar":()=>n.e("components/rf-search-bar/rf-search-bar").then(n.bind(null,"072d")),"rf-swipe-dot":()=>n.e("components/rf-swipe-dot/rf-swipe-dot").then(n.bind(null,"3c8e")),"rf-swiper-slide":()=>n.e("components/rf-swiper-slide/rf-swiper-slide").then(n.bind(null,"0099")),"rf-floor-index":()=>n.e("components/rf-floor-index/rf-floor-index").then(n.bind(null,"64c5")),"rf-loading":()=>n.e("components/rf-loading/rf-loading").then(n.bind(null,"6109"))},r=function(){var e=this,t=e.$createElement,n=(e._self._c,{title:"新品上市",desc:"New Products Listed"}),a={title:"推荐商品",desc:"Recommend Product"},r={title:"兑换专区",desc:"Exchange Zone"},i={title:"复购专区",desc:"Repeat Purchase"};e.$mp.data=Object.assign({},{$root:{a0:n,a1:a,a2:r,a3:i}})},i=[];n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a})},"803d":function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("a34a"));n("00ba"),n("d949"),n("c7a8");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a,r,i,o){try{var c=e[i](o),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,u,"next",e)}function u(e){o(i,a,r,c,u,"throw",e)}c(void 0)})}}var u=function(){return n.e("components/uni-grid/uni-grid").then(n.bind(null,"b2dc"))},s=function(){return n.e("components/uni-grid-item/uni-grid-item").then(n.bind(null,"31e0"))},d=function(){return n.e("components/uni-icons/uni-icons").then(n.bind(null,"1183"))},f=function(){return n.e("components/rf-swipe-dot/rf-swipe-dot").then(n.bind(null,"3c8e"))},l=function(){return n.e("components/rf-floor-index/rf-floor-index").then(n.bind(null,"64c5"))},h=function(){return n.e("components/rf-search-bar/rf-search-bar").then(n.bind(null,"072d"))},p=function(){return n.e("components/rf-swiper-slide/rf-swiper-slide").then(n.bind(null,"0099"))},g={components:{uniGrid:u,uniIcons:d,uniGridItem:s,rfFloorIndex:l,rfSwipeDot:f,rfSearchBar:h,rfSwiperSlide:p},data:function(){return{current:0,headerShow:!0,carouselList:{},hotProductList:[],recommendProductList:[],RepeatPurchaseList:[],newProductList:[],productCateList:[],brandList:[],config:{},index:0,merchantList:[],announceList:[],loading:!0,hotSearchDefault:"请输入关键字"}},onShow:function(){e("log","index_onShow"," at pages\\index\\index.vue:165"),a.getStorageSync("accessToken")&&a.getStorageSync("cartNum")&&(0==a.getStorageSync("cartNum")?a.removeTabBarBadge({index:2}):a.setTabBarBadge({index:2,text:a.getStorageSync("cartNum").toString()})),this.initData()},onShareAppMessage:function(){return{title:"低聚木糖商城",path:"/pages/index/index"}},onPullDownRefresh:function(){this.getIndexList("refresh")},methods:{bindPickerChange:function(e){a.setStorageSync("merchantId",this.merchantList[e.target.value].id),a.setStorageSync("merchantIndex",e.target.value),this.index=e.target.value,a.removeStorage({key:"userInfo"}),a.removeStorage({key:"accessToken"}),this.getIndexList()},handleDotChange:function(e){this.current=e.detail.current},initData:function(){a.removeStorageSync("cateTop"),this.getIndexList()},navToList:function(e){a.navigateTo({url:"/pages/product/list?cate_id=".concat(e)})},indexTopToDetailPage:function(e,t){var n,r,i;switch(t?(i=t,r=e):(r=e.type,i=e.id),r){case"product_view":n="/pages/product/product?id=".concat(i);break;case"article_view":this.$api.msg("article_view");break;case"coupon_view":n="/pages/coupon/detail?id=".concat(i);break;case"helper_view":this.$api.msg("helper_view");break;case"product_list_for_cate":n="/pages/product/list?cate_id=".concat(i);break;default:break}n&&a.navigateTo({url:n})},toProductList:function(e){a.navigateTo({url:"/pages/product/list?params=".concat(JSON.stringify(e))})},getIndexList:function(){var e=c(r.default.mark(function e(t){var n=this;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$get("http://localhost:8080/static/api/indexList.json",{}).then(function(){var e=c(r.default.mark(function e(i){return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n.loading=!1,n.getMerchantIndex(),n.getNotifyAnnounceIndex(),"refresh"===t&&a.stopPullDownRefresh(),n.productCateList=i.data.cate,n.carouselList=i.data.adv,n.search=i.data.search,a.setStorageSync("search",n.search),n.hotSearchDefault="请输入关键字"+(i.data.search.hot_search_default?"如:"+i.data.search.hot_search_default:""),a.setStorage({key:"hotSearchDefault",data:i.data.search.hot_search_default}),n.hotProductList=i.data.product_hot,n.recommendProductList=i.data.product_recommend,n.RepeatPurchaseList=i.data.Repeat_Purchase,n.newProductList=i.data.product_new,n.config=i.data.config;case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){n.loading=!1});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getMerchantIndex:function(){var e=c(r.default.mark(function e(){var t=this;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$get("http://localhost:8080/static/api/indexList.json",{}).then(function(e){t.merchantList=e.data,t.index=a.getStorageSync("merchantIndex")||e.data.length-1});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getNotifyAnnounceIndex:function(){var t=c(r.default.mark(function t(){var n=this;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$get("http://localhost:8080/static/api/notifyAnnounceIndex.json",{}).then(function(t){n.announceList=t.data,e("log",n.announceList," at pages\\index\\index.vue:304")});case 2:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),navToDetailPage:function(e){var t=e.id;t&&a.navigateTo({url:"/pages/product/product?id=".concat(t)})},toSearch:function(){a.navigateTo({url:"/pages/search/search?search=".concat(JSON.stringify(this.search))})},toCategory:function(){a.reLaunch({url:"/pages/category/category"})}}};t.default=g}).call(this,n("0de9")["default"],n("6e42")["default"])},"8daf":function(e,t,n){"use strict";var a=n("cb1e"),r=n.n(a);r.a},"98da":function(e,t,n){"use strict";n.r(t);var a=n("2d20"),r=n("df30");for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n("8daf");var o,c=n("f0c5"),u=Object(c["a"])(r["default"],a["b"],a["c"],!1,null,"790577fe",null,!1,a["a"],o);t["default"]=u.exports},a8f3:function(e,t,n){"use strict";(function(e){n("8cfb"),n("921b");a(n("66fd"));var t=a(n("98da"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},cb1e:function(e,t,n){},df30:function(e,t,n){"use strict";n.r(t);var a=n("803d"),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=r.a}},[["a8f3","common/runtime","common/vendor"]]]);